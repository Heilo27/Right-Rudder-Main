---
description: Version management guidelines for Right Rudder using Semantic Versioning
alwaysApply: false
---

# Version Management Guidelines

Comprehensive guide for managing version numbers in Right Rudder using **Semantic Versioning** with automatic build number increments.

## Overview

Right Rudder uses two version identifiers:

### 1. Version Number (CFBundleShortVersionString)
- Format: `MAJOR.MINOR.PATCH` (e.g., `2.1.3`)
- **User-facing** - shown in App Store and Settings
- **Manually controlled** - you decide when to increment based on changes
- Examples: `1.0.0`, `1.5.2`, `2.0.0`

### 2. Build Number (CFBundleVersion)
- Format: Integer (e.g., 42, 150, 1234)
- **Internal tracking** - shown in Settings and TestFlight
- **Automatically incremented** - increases with every build
- Examples: `1`, `42`, `150`

## Semantic Versioning System

### MAJOR Version (X.0.0)

**Increment when:** Adding breaking changes or major overhauls
- Complete UI redesigns
- Major architectural changes
- Significant new core features that change how the app works
- Removing major features

**Examples:**
- `1.0.0` → `2.0.0`: Complete app redesign
- `2.5.3` → `3.0.0`: New data model requiring migration

**When to use:** Rarely - only for game-changing updates

---

### MINOR Version (1.X.0)

**Increment when:** Adding significant new features
- New major functionality (e.g., CloudKit sharing, template sharing)
- New screens or major UI sections
- Integration with new services
- Significant workflow additions

**Examples:**
- `1.0.0` → `1.1.0`: Added CloudKit student sharing
- `1.1.0` → `1.2.0`: Added template import/export feature
- `1.2.0` → `1.3.0`: Added backup/restore functionality

**When to use:** For notable feature releases that users will notice

---

### PATCH Version (1.1.X)

**Increment when:** Making bug fixes or minor improvements
- Bug fixes
- Performance improvements
- Minor UI tweaks
- Small feature refinements
- Text/copy changes
- Fixing crashes

**Examples:**
- `1.1.0` → `1.1.1`: Fixed crash in checklist view
- `1.1.1` → `1.1.2`: Improved military time display
- `1.1.2` → `1.1.3`: Fixed sorting issue in student details

**When to use:** For maintenance releases and small improvements

## Automatic Build Number Increment

### Setup

The auto-increment script should be configured in Xcode Build Phases:

1. **Right Rudder target** → **Build Phases** tab
2. **Run Script Phase** named "Auto-Increment Build Number"
3. **Position**: BEFORE "Compile Sources"
4. **Script**: See `.cursor/commands/setup-versioning.md` for script content

### How It Works

- **Every time you build**: Build number increments automatically (1 → 2 → 3 → 4...)
- **Works for all builds**: Debug, Release, TestFlight, App Store
- **No manual intervention**: Set it and forget it
- **Git-friendly**: Only Info.plist changes, easy to track

## Decision Guide: "What Version Should This Be?"

### Flowchart

```
Does this change break compatibility or completely overhaul the app?
├─ YES → Increment MAJOR (e.g., 1.5.2 → 2.0.0)
└─ NO ↓

Is this a significant new feature users will notice?
├─ YES → Increment MINOR (e.g., 1.5.2 → 1.6.0)
└─ NO ↓

Is this a bug fix or small improvement?
├─ YES → Increment PATCH (e.g., 1.5.2 → 1.5.3)
└─ NO → No version change needed
```

### Real Examples

| Change | Version Change | Reasoning |
|--------|---------------|-----------|
| Added template sharing feature | 1.0.0 → 1.1.0 | New major feature (MINOR) |
| Fixed military time format | 1.1.0 → 1.1.1 | Bug fix (PATCH) |
| Fixed checklist sorting | 1.1.1 → 1.1.2 | Bug fix (PATCH) |
| Added CloudKit student sharing | 1.1.2 → 1.2.0 or 2.0.0 | Major feature (MINOR or MAJOR) |
| Fixed typo in button text | No change | Too minor, just build increment |
| Complete UI redesign | 2.0.0 → 3.0.0 | Breaking change (MAJOR) |

## How to Change Version Numbers

### Method 1: Xcode UI (Recommended)

1. Select your project in Project Navigator
2. Select the **Right Rudder** target
3. Go to **General** tab
4. Under **Identity**, find:
   - **Version**: Change this manually (e.g., `2.0.0` → `2.1.0`)
   - **Build**: Auto-increments (leave it)

### Method 2: Info.plist

1. Open `Right Rudder/Info.plist`
2. Find or add:
   - `CFBundleShortVersionString`: Your version (e.g., `2.0.0`)
   - `CFBundleVersion`: Build number (auto-increments)

## Best Practices

### ✅ DO:
- Update version BEFORE submitting to App Store
- Keep build numbers incrementing automatically
- Document version changes in release notes
- Use consistent versioning across all targets
- Commit version changes to git with descriptive messages
- Use semantic versioning consistently

### ❌ DON'T:
- Manually edit build numbers (let the script handle it)
- Skip version increments (1.0.0 → 1.2.0)
- Use version 0.x.x in production
- Reset build numbers (they should always increase)
- Change version for every commit (only for releases)

## Quick Reference

| Scenario | Action | Example |
|----------|--------|---------|
| Fixed a crash | Increment PATCH | 1.2.3 → 1.2.4 |
| Added new screen/feature | Increment MINOR | 1.2.3 → 1.3.0 |
| Major redesign | Increment MAJOR | 1.2.3 → 2.0.0 |
| Building for testing | Do nothing | Build auto-increments |
| Submitting to App Store | Check version is correct | Ensure version reflects changes |

## Current Version

**Right Rudder Instructor App:**
- **Version**: Check Xcode project settings
- **Build**: Auto-increments

**To check current version:**
1. Open Xcode → Right Rudder target → General tab
2. Or check `Right Rudder/Info.plist`:
   - `CFBundleShortVersionString` = Version
   - `CFBundleVersion` = Build

## Troubleshooting

### Build number not incrementing
- Check the script is in Build Phases
- Ensure script runs BEFORE "Compile Sources"
- Check Info.plist path is correct in script
- Clean build folder (Cmd+Shift+K) and rebuild

### Version not showing correctly
- Check Info.plist has `CFBundleShortVersionString`
- Verify value is in X.Y.Z format
- Clean and rebuild project

### Version conflicts in git
- Version changes are normal - commit them
- Use meaningful commit messages: `"Bump version to 2.0.0 for major release"`

## Future Versioning Examples

**Next bug fix release:**
- Version: `2.0.0` → `2.0.1`
- Changes: "Fixed backup timestamp, improved sorting"

**Next feature release:**
- Version: `2.0.1` → `2.1.0`
- Changes: "Added student progress reports"

**Next major release:**
- Version: `2.1.0` → `3.0.0`
- Changes: "Complete iPad optimization, new data architecture"

## Related Documentation

- **Quick Setup**: `.cursor/commands/setup-versioning.md` - 5-minute setup guide
- **Development Playbook**: `AGENTS.md` - General development guidelines
- **Project Review**: `docs/review/PROJECT_REVIEW_BACKLOG.md` - Version alignment task (HIGH-014)

---

**Remember:**
- **Version (2.0.0)**: Manual, semantic, user-facing
- **Build (123)**: Automatic, internal tracking
- **MAJOR**: Breaking changes, complete overhauls
- **MINOR**: Significant new features
- **PATCH**: Bug fixes and small improvements
- **Script handles builds**: Set it up once, forget it
